{% set consult = seminar.consultByUser(app.user) %}
{% set percentDone = (consult.finishedChapters|length / seminar.chapters|length * 100)|round %}

{% if percentDone == 0 %}
    {% set semLink = path('app_seminar_index',{id:seminar.id}) %}
{% else %}
    {% set semLink = path('app_seminar_read',{id:seminar.id, chapterId: consult.finishedChapters|sort|last + 1}) %}
{% endif %}

{% if consult.isFinished == false %}
    
    <li class="px-0 list-group-item d-flex justify-content-between align-items-center gap-1" data-seminar-tags="{{seminar.tags|join(',')}}">
        <div style="min-width: 60%;" class="h6 m-0 d-flex flex-column justify-content-center align-items-start">
            <p class="m-0 d-flex gap-2"><i class="fa-regular fa-file-lines text-dark opacity-50"></i><a href="{{semLink}}">{{seminar}}</a></p>
            <div class="mt-1 mb-0 d-flex gap-2 align-items-center">
                <i class="fa-solid fa-tags text-dark opacity-50"></i>
                {% for tag in seminar.tags %}
                <div class="badge border border-dark text-dark opacity-25">{{tag}}</div>
                {% endfor %}
            </div>
        </div>
        {% if consult.finishedChapters|length > 0 %}
            <div class="w-100 text-success d-flex flex-column align-items-center justify-content-center small">
                {{consult.finishedChapters|length}} / {{seminar.chapters|length}} chapitres lus
                {{ include('seminars/progressBar.html.twig', {percentDone:percentDone}) }}
            </div>
        {% else %}
            <div class="w-100 text-secondary fst-italic d-flex flex-column align-items-center justify-content-center small">
                Aucun chapitre lu
            </div>
        {% endif %}
        <div class="w-100 d-flex align-items-center justify-content-center small text-secondary no-mobile">{{consult.lastConsultedAt|date('d/m/Y à H:i','Europe/Paris')}}</div>
    </li>

{% else %}

    <li class="px-0 list-group-item d-flex justify-content-between align-items-center gap-1" data-seminar-tags="{{seminar.tags|join(',')}}">
        <div style="min-width: 60%" class="fst-italic h6 small m-0">
            <p class="m-0"><a href="{{path('app_seminar_index',{id:seminar.id})}}">{{seminar}}</a></p>
        </div>
        <div class="w-100 text-primary fst-italic small d-flex flex-column align-items-center justify-content-center">
            {{consult.finishedChapters|length}} / {{seminar.chapters|length}} chapitres lus
            {{ include('seminars/progressBar.html.twig', {percentDone:percentDone}) }}
        </div>
        <div class="w-100 d-flex align-items-center justify-content-center small text-secondary no-mobile">{{consult.lastConsultedAt|date('d/m/Y à H:i','Europe/Paris')}}</div>
    </li>

{% endif %}